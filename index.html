<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        * {
            background-color: black;
        }
    </style>
    <script>
        let prof_disc = [
            "Clarimundo-POO1",
            "Clarimundo-POO1",
            "Clarimundo-POO1",
            "Clarimundo-POO1",
            "Wilton-WebDesing",
            "Wilton-WebDesing",
            "Wilton-WebDesing",
            "Wilton-WebDesing",
            "Bruno-Requisitos",
            "Bruno-Requisitos",
            "Bruno-Requisitos",
            "Bruno-Requisitos",
            "Cricia-BDA",
            "Cricia-BDA",
            "Cricia-BDA",
            "Cricia-BDA",
            "Nelio-Logica",
            "Nelio-Logica",
            "Nelio-Logica",
            "Nelio-Logica",
            "Clarimundo-POO2",
            "Clarimundo-POO2",
            "Clarimundo-POO2",
            "Clarimundo-POO2",
            "Wilton-JavaScript",
            "Wilton-JavaScript",
            "Wilton-JavaScript",
            "Wilton-JavaScript",
            "Bruno-Java",
            "Bruno-Java",
            "Bruno-Java",
            "Bruno-Java",
            "Cricia-BDA2",
            "Cricia-BDA2",
            "Cricia-BDA2",
            "Cricia-BDA2",
            "Edson-MVC",
            "Edson-MVC",
            "Edson-MVC",
            "Edson-MVC",
            "Clarimundo-POO3",
            "Clarimundo-POO3",
            "Clarimundo-POO3",
            "Clarimundo-POO3",
            "Wilton-REACT",
            "Wilton-REACT",
            "Wilton-REACT",
            "Wilton-REACT",
            "Bruno-Teste Unitatio",
            "Bruno-Teste Unitatio",
            "Bruno-Teste Unitatio",
            "Bruno-Teste Unitatio",
            "Cricia-BDA3",
            "Cricia-BDA3",
            "Cricia-BDA3",
            "Cricia-BDA3",
            "Nelio-Monolitico",
            "Nelio-Monolitico",
            "Nelio-Monolitico",
            "Nelio-Monolitico",
            "Edson-React-native",
            "Edson-React-native",
            "Edson-React-native",
            "Edson-React-native",
            "Wilton-IHC",
            "Wilton-IHC",
            "Wilton-IHC",
            "Wilton-IHC",
            "Carlos-Empreendedorismo",
            "Carlos-Empreendedorismo",
            "Carlos-Empreendedorismo",
            "Carlos-Empreendedorismo",
            "Camilo-MicroServicos",
            "Camilo-MicroServicos",
            "Camilo-MicroServicos",
            "Camilo-MicroServicos",
            "Camilo-NoSql",
            "Camilo-NoSql",
            "Camilo-NoSql",
            "Camilo-NoSql",
            "Clarimundo-IC",
            "Clarimundo-IC",
            "Clarimundo-IC",
            "Clarimundo-IC",
            "Sabrina-Libras",
            "Sabrina-Libras",
            "Sabrina-Libras",
            "Sabrina-Libras",
            "Magno-Prelamo",
            "Magno-Prelamo",
            "Magno-Prelamo",
            "Magno-Prelamo",
            "Edson-opcional 1",
            "Edson-opcional 1",
            "Edson-opcional 1",
            "Edson-opcional 1",
            "Camilo-Segurança da Internet",
            "Camilo-Segurança da Internet",
            "Camilo-Segurança da Internet",
            "Camilo-Segurança da Internet",
        ];
        let cont = [];
        let arrayNota = [];
        let arrayFilho = [];
        function shuffleArray(array) {
            const shuffledArray = [...array];
            for (let i = shuffledArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledArray[i], shuffledArray[j]] = [
                    shuffledArray[j],
                    shuffledArray[i],
                ];
            }
            return shuffledArray;
        }
        function getUniqueGroups(array, groupSize, pop, isAgain) {
            if(!isAgain){
            for (let a = 0; a < pop; a++) {
                const periodos = [];
                for (let i = 0; i < prof_disc.length; i += 20) {
                    const periodo = prof_disc.slice(i, i + 20);
                    periodos.push(periodo);
                }
                let cont = 0;
                const shuffledArray = [];
                while (cont < 5) {
                    const shuffledPeriod = shuffleArray(periodos[cont]);
                    shuffledArray.push(...shuffledPeriod);
                    cont++;
                }
                const groups = [];

                while (shuffledArray.length > 0) {
                    const group = shuffledArray.splice(0, groupSize);
                    groups.push(group);
                }
                validation(groups);
            }
            ordernacao()
        }
        else {
            validation(array);
        }
        }
        let primeira = 0
        let socorro = []
        function validation(group) {
            // console.log(group, 'group')
            let contadorValidateFail = 0;
            let contadorValideSucess = 0;
            for (let i = 0; i < 5; i++) {
                let avial = false;
                const primeiro_periodo = group[i];
                const segundo_periodo = group[i + 5];
                const terceiro_periodo = group[i + 10];
                const quarto_periodo = group[i + 15];
                const quinto_periodo = group[i + 20];
                // console.log(primeiro_periodo, 'primeirp eriodo')
                loop1: for (let i = 0; i < primeiro_periodo.length; i++) {
                    avial = false;
                    const name_prof_1 = primeiro_periodo[i].split("-");
                    for (let j = 0; j < segundo_periodo.length; j++) {
                        const name_prof_2 = segundo_periodo[i].split("-");
                        if (name_prof_1[0] == name_prof_2[0]) {
                            avial = true;
                            contadorValidateFail++;
                        }
                        for (let k = 0; k < terceiro_periodo.length; k++) {
                            const name_prof_3 = terceiro_periodo[i].split("-");
                            if (
                                name_prof_1[0] == name_prof_3[0] ||
                                name_prof_2[0] == name_prof_3[0]
                            ) {
                                avial = true;
                                contadorValidateFail++;
                            }
                            loop4: for (let l = 0; l < quarto_periodo.length; l++) {
                                const name_prof_4 = quarto_periodo[i].split("-");
                                if (
                                    name_prof_1[0] == name_prof_4[0] ||
                                    name_prof_2[0] == name_prof_4[0] ||
                                    name_prof_3[0] == name_prof_4[0]
                                ) {
                                    avial = true;
                                    contadorValidateFail++;
                                }
                                for (let m = 0; m < quinto_periodo.length; m++) {
                                    const name_prof_5 = quinto_periodo[i].split("-");
                                    if (
                                        name_prof_1[0] == name_prof_5[0] ||
                                        name_prof_2[0] == name_prof_5[0] ||
                                        name_prof_3[0] == name_prof_5[0] ||
                                        name_prof_4[0] == name_prof_5[0]
                                    ) {
                                        contadorValidateFail++;
                                        continue loop1; // Indica que o loop deve ser interrompido
                                    } else if (avial) {
                                        continue loop1;
                                    } else {
                                        contadorValideSucess++;
                                        continue loop1;
                                    }
                                }
                            }
                        }
                    }
                }
            }
            arrayNota.push(group);
            cont.push(contadorValidateFail);
        }
        let numerosOrdenados;
        function ordernacao() {
            const prof = arrayNota;
            const notas = cont;
            const combinedArray = prof.map((nome, index) => ({
                nome,
                numero: notas[index],
            }));
            
            combinedArray.sort((a, b) => a.numero - b.numero);
            primeira++;
            const nomesOrdenados = combinedArray.map((objeto) => objeto.nome);
            numerosOrdenados = combinedArray.map((objeto) => objeto.numero);
            if(primeira == 1){
                socorro = numerosOrdenados
            }
            mesclar(nomesOrdenados)
        }
        function mesclar(nomes) {
            const pai = Math.floor(Math.random() * ((nomes.length/2) - 0 + 1)) + 0;
            const mae = Math.floor(Math.random() * (nomes.length - 0)) + 0;
            const tamanhoParte = 5;
            const partes = [];
            const partesMae = [];
            for (let i = 0; i < nomes[pai].length; i += tamanhoParte) {
                const parte = nomes[pai].slice(i, i + tamanhoParte);
                partes.push(parte);
            }
            for (let i = 0; i < nomes[mae].length; i += tamanhoParte) {
                const parte = nomes[mae].slice(i, i + tamanhoParte);
                partesMae.push(parte);
            }
            setTimeout(() => {
                const corte = Math.floor(Math.random() * (4 - 0 + 1)) + 0;
                const primeiroArrayAntes = partes.slice(0, corte + 1);
                const primeiroArrayDepois = partes.slice(corte + 1);
                const segundoArrayAntes = partesMae.slice(0, corte + 1);
                const segundoArrayDepois = partesMae.slice(corte + 1);
                const primeir_array_filho = primeiroArrayAntes.concat(segundoArrayDepois);
                const segunda_array_filho = segundoArrayAntes.concat(primeiroArrayDepois);
                mutacao(primeir_array_filho, segunda_array_filho)
            }, 10);

        }
        function mutacao(filho1, filho2){
            
            filho1.map((horarios, index)=>{
                const cont = Math.floor(Math.random() * (4 - 0 + 1)) + 0;
                const cont2 = Math.floor(Math.random() * (4 - 0 + 1)) + 0;
                const cont3 = Math.floor(Math.random() * (3 - 0 + 1)) + 0;
                const cont4 = Math.floor(Math.random() * (3 - 0 + 1)) + 0;
                const horarioChange = horarios[cont][cont3]
                filho1[index][cont][cont3] = horarios[cont2][cont4]
                filho1[index][cont2][cont4] = horarioChange
            })
            filho2.map((horarios, index)=>{
                const cont = Math.floor(Math.random() * (4 - 0 + 1)) + 0;
                const cont2 = Math.floor(Math.random() * (4 - 0 + 1)) + 0;
                const cont3 = Math.floor(Math.random() * (3 - 0 + 1)) + 0;
                const cont4 = Math.floor(Math.random() * (3 - 0 + 1)) + 0;
                const horarioChange = horarios[cont][cont3]
                filho2[index][cont][cont3] = horarios[cont2][cont4]
                filho2[index][cont2][cont4] = horarioChange
            })
            let teste = []
            let teste2 = []
            filho1.map((res)=>{
                res.map((test)=>{
                    teste.push(test)
                })
            })
            filho2.map((res)=>{
                res.map((test)=>{
                    teste2.push(test)
                })
            })
            arrayFilho.push(teste)
            arrayFilho.push(teste2)
            // console.log(arrayNota, 'arrraynota')
            // console.log(arrayFilho, 'filho2')
            if(arrayFilho.length !== arrayNota.length){
                mesclar(arrayNota)
            }
            else {
                contGeracao++
                prof_disc = arrayFilho
                arrayFilho = []
                teste = []
                teste2 = []
                arrayNota = []
                help.push(numerosOrdenados)
                if(contGeracao !== geracao){
                    cont = [];
                    // console.log('entrei')
                    // console.log(arrayNota, 'arraynot')
                    for (let a = 0; a < 50; a++) {
                        getUniqueGroups(prof_disc[a],0,0, true)
                    }
                    ordernacao();
                }
                else {
                    console.log(numerosOrdenados, 'cont')
                    console.log(help, 'help');
                    console.log(socorro, 'primeirocont')
                    console.log(prof_disc, 'foiiiiii')
                }
            }

        }
        let geracao = 100;
        let contGeracao = 0;
        let help = []
        getUniqueGroups(prof_disc, 4, 50, false);
        // ordernacao();
    </script>
</head>

<body>
    <!-- <button onclick="getUniqueGroups(prof_disc, 4)">Teste</button> -->
</body>

</html>
